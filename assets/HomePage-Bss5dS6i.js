import{n as $,_ as y,u as w,g as v,s as k,r as C,h as j,o as n,c as d,e as t,i as s,f as S,j as V,t as r,k as x,l as h,w as N,v as M,b as F,m as D,F as _,p as T,q as B}from"./index-pV678o_C.js";const b=c=>{const a=c.target||c;return a.style.height="auto",$(()=>{a.style.height=a.scrollHeight+5+"px"})},L=["id"],H={class:"h-full flex flex-col justify-between gap-7 gap-md-10"},I={class:"flex flex-col gap-7 gap-md-10"},O={class:"flex flex-col gap-4 gap-md-6"},U={class:"flex flex-col gap-2"},z={class:"flex flex-wrap justify-between gap-2"},P={key:0,class:"flex-auto text-red lh-1 px-6"},q={class:"flex flex-col gap-2"},E={class:"flex flex-wrap justify-between gap-2"},R={key:0,class:"flex-auto text-red lh-1 px-6"},A={class:"flex flex-col gap-3 gap-md-5"},G={key:0,class:"w-100 text-red px-5 py-2 rounded-5 bg-danger bg-opacity-10"},J={class:"lh-1"},K={__name:"NoteModal",props:{id:{type:String,default:"modal"}},setup(c){const a=w(),l=v(),{errors:u}=k(l),f=C(null),o=j({title:"",content:""}),p=async()=>{await l.save("notes",o).then(async()=>{await l.getData("notes").then(async()=>{await a.close()}).catch(()=>{})}).catch(()=>{})};return(m,e)=>(n(),d("div",{id:c.id,class:"modal relative bg-white rounded-lg text-left overflow-hidden shadow-xl w-full px-4 py-22.5 p-md-14 p-xxl-20",role:"dialog",ref_key:"modal",ref:f,"aria-modal":"true","aria-labelledby":"modal-headline"},[t("button",{type:"button",class:"absolute btn-close top-0 right-0 m-3 m-md-5",onClick:e[0]||(e[0]=i=>s(a).close()),"aria-label":"Close"}),t("div",H,[t("div",I,[e[6]||(e[6]=t("h2",null,"Добавление заметки",-1)),t("div",O,[t("div",U,[e[4]||(e[4]=t("p",{class:"text-gray lh-1 px-6"},[t("small",null,"Название заметки")],-1)),S(V,{modelValue:o.title,"onUpdate:modelValue":e[1]||(e[1]=i=>o.title=i),id:"title",name:"title",placeholder:"Введите название",autocomplete:"title"},null,8,["modelValue"]),t("div",z,[s(l).isValid("title")?x("",!0):(n(),d("p",P,[t("small",null,r(s(l).errorFeedback("title")),1)])),t("p",{class:h(["flex-auto text-end text-gray lh-1 px-6",[o.title.length>64&&"text-red"]])},[t("small",null,r(`${o.title.length}/64`),1)],2)])]),t("div",q,[e[5]||(e[5]=t("p",{class:"text-gray lh-1 px-6"},[t("small",null,"Текст заметки")],-1)),N(t("textarea",{id:"content",name:"content","onUpdate:modelValue":e[2]||(e[2]=i=>o.content=i),placeholder:"Введите текст",autocomplete:"content",class:"form-control",rows:"5",onInput:e[3]||(e[3]=(...i)=>s(b)&&s(b)(...i))},null,544),[[M,o.content]]),t("div",E,[s(l).isValid("content")?x("",!0):(n(),d("p",R,[t("small",null,r(s(l).errorFeedback("content")),1)])),t("p",{class:h(["flex-auto text-end text-gray lh-1 px-6",[o.content.length>255&&"text-red"]])},[t("small",null,r(`${o.content.length}/255`),1)],2)])])])]),t("div",A,[t("div",{class:"flex flex-col-reverse flex-md-row gap-3 gap-md-10 justify-between items-center"},[e[7]||(e[7]=t("div",{class:"flex flex-wrap justify-center justify-xl-start justify-xxl-center gap-1"},null,-1)),t("button",{type:"button",class:"btn btn-primary w-full w-md-auto text-center",onClick:p}," Добавить ")]),[404,409].includes(s(u).status)?(n(),d("div",G,[t("p",J,[t("small",null,r(s(l).errorFeedback("global")),1)])])):x("",!0)])])],8,L))}},Q=y(K,[["__scopeId","data-v-b1874512"]]),W={key:0,class:"w-full flex flex-wrap gap-5 gap-xxl-10 mb-5 mb-md-10"},X={class:"card-container w-full w-xl-1/3"},Y={class:"card flex flex-col box-shadow"},Z={class:"card-title relative py-5 pl-7 pr-17"},tt={class:"card-body pt-5 pb-7 px-7"},et={class:"text-truncate-multiline"},lt={class:"card-footer flex justify-end p-2"},st=["onClick"],ot={__name:"HomePage",setup(c){const a=w(),l=v(),{data:u,isLoading:f}=k(l),g=async p=>{await l.destroy(`notes/${p}`,!1).then(async()=>{await l.getData("notes")}).catch(()=>{})},o=async()=>{await a.open(Q,{id:"modalNote"})};return F(async()=>{await l.getData("notes")}),D(()=>{l.setDefaultStore()}),(p,m)=>(n(),d(_,null,[!s(f)&&s(u).length>0?(n(),d("div",W,[(n(!0),d(_,null,T(s(u),e=>(n(),d("div",X,[t("div",Y,[t("div",Z,[t("h4",null,r(e.title),1)]),t("div",tt,[t("p",et,r(e.content),1)]),t("div",lt,[t("button",{type:"button",class:"btn btn-link flex gap-5 items-center px-6 py-3",onClick:i=>g(e.id)},m[0]||(m[0]=[t("svg",{width:"19",height:"18",viewBox:"0 0 19 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M1.66699 1L17.667 17M17.667 1L1.66699 17",stroke:"white","stroke-width":"2","stroke-linecap":"round"})],-1),B(" Удалить ")]),8,st)])])]))),256))])):x("",!0),t("button",{type:"button",class:"absolute btn-plus bottom-0 right-0 mb-10 mr-2 mr-xl-3 mr-xxl-10 z-5","aria-label":"Create note",onClick:o})],64))}},nt=y(ot,[["__scopeId","data-v-8df8d4fd"]]);export{nt as default};
